# Yuki çš„æ·±åº¦çŸ¥è¯†åº“

## ğŸ“Š æ•´ä½“æ¶æ„æ¦‚è§ˆ

### Clawdbot ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Clawdbot ç³»ç»Ÿ                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Gateway (å®ˆæŠ¤è¿›ç¨‹)                                             â”‚
â”‚  â”œâ”€â”€ WebSocket æœåŠ¡ (é»˜è®¤ 127.0.0.1:18789)                      â”‚
â”‚  â”œâ”€â”€ Provider è¿æ¥ç®¡ç†                                           â”‚
â”‚  â”œâ”€â”€ æ¶ˆæ¯è·¯ç”±å’Œåˆ†å‘                                              â”‚
â”‚  â”œâ”€â”€ äº‹ä»¶ç³»ç»Ÿ (agent, chat, presence, health, heartbeat, cron)  â”‚
â”‚  â””â”€â”€ è®¤è¯å’Œæˆæƒ                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Control Clients (macOS app, CLI, Web UI, automations)          â”‚
â”‚  â””â”€â”€ é€šè¿‡ WebSocket è¿æ¥ Gateway                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Nodes (macOS/iOS/Android/headless)                             â”‚
â”‚  â”œâ”€â”€ Canvas Host (é»˜è®¤ 18793) - HTML/A2UI å±•ç¤º                   â”‚
â”‚  â”œâ”€â”€ Camera/Screen/Location æ§åˆ¶                                 â”‚
â”‚  â””â”€â”€ é€šè¿‡ WebSocket è¿æ¥ Gateway                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Channels (æ¶ˆæ¯é€šé“)                                            â”‚
â”‚  â”œâ”€â”€ Discord (å·²é…ç½®)                                           â”‚
â”‚  â”œâ”€â”€ WhatsApp (via Baileys)                                     â”‚
â”‚  â”œâ”€â”€ Telegram (via grammY)                                      â”‚
â”‚  â”œâ”€â”€ Slack                                                      â”‚
â”‚  â”œâ”€â”€ Signal                                                     â”‚
â”‚  â”œâ”€â”€ iMessage                                                   â”‚
â”‚  â””â”€â”€ WebChat                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### NekroAI ç”Ÿæ€æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      NekroAI ç”Ÿæ€ç³»ç»Ÿ                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ ¸å¿ƒäº§å“                                                       â”‚
â”‚  â”œâ”€â”€ NekroAgent (AI èŠå¤©æœºå™¨äººæ¡†æ¶)                              â”‚
â”‚  â”‚   â”œâ”€â”€ NoneBot2 æ ¸å¿ƒ                                          â”‚
â”‚  â”‚   â”œâ”€â”€ å¤šå¹³å°é€‚é…å™¨ (QQ, Discord, Telegram, Minecraft, Bç«™...)  â”‚
â”‚  â”‚   â”œâ”€â”€ æ²™ç›’æ‰§è¡Œç³»ç»Ÿ (Docker)                                   â”‚
â”‚  â”‚   â”œâ”€â”€ æ’ä»¶ç³»ç»Ÿ                                               â”‚
â”‚  â”‚   â””â”€â”€ WebUI ç®¡ç†ç•Œé¢                                         â”‚
â”‚  â”œâ”€â”€ Nekro Endpoint (API ä»£ç†å¹³å°)                              â”‚
â”‚  â”‚   â””â”€â”€ Cloudflare Workers éƒ¨ç½²                                â”‚
â”‚  â”œâ”€â”€ Claude Code Nexus (Claude API ä»£ç†)                        â”‚
â”‚  â”œâ”€â”€ One Tracker (AI æ¨¡å‹ä»·æ ¼è¿½è¸ª)                               â”‚
â”‚  â””â”€â”€ NekroEdge (å…¨æ ˆè¾¹ç¼˜è®¡ç®—æ¨¡æ¿)                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  äº‘æœåŠ¡                                                         â”‚
â”‚  â”œâ”€â”€ https://nekro.ai (å®˜ç½‘)                                    â”‚
â”‚  â”œâ”€â”€ https://doc.nekro.ai (æ–‡æ¡£ä¸­å¿ƒ)                             â”‚
â”‚  â”œâ”€â”€ https://community.nekro.ai (äº‘ç¤¾åŒº)                         â”‚
â”‚  â”œâ”€â”€ https://ep.nekro.ai (è¾¹ç¼˜ä»£ç†)                              â”‚
â”‚  â””â”€â”€ https://ot.nekro.ai (One Tracker)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ æ ¸å¿ƒæŠ€æœ¯æ ˆ

### Clawdbot

**æ ¸å¿ƒæ¡†æ¶**:
- Python + asyncio
- WebSocket åè®® (Gateway)
- NoneBot2 (éƒ¨åˆ†é›†æˆ)
- TypeBox (åè®®å®šä¹‰)

**ä¸»è¦ä¾èµ–**:
- `websockets` - WebSocket æœåŠ¡å™¨
- `aiohttp` - å¼‚æ­¥ HTTP å®¢æˆ·ç«¯
- `pydantic` - æ•°æ®éªŒè¯
- `typebox` - JSON Schema ç”Ÿæˆ

**åè®®æ ˆ**:
- WebSocket (æ–‡æœ¬å¸§ + JSON)
- JSON Schema (è¯·æ±‚/å“åº”/äº‹ä»¶)
- Device Identity + Pairing

### NekroAgent

**æ ¸å¿ƒæ¡†æ¶**:
- NoneBot2 (Python ASGI)
- FastAPI (Web API)
- Tortoise ORM (æ•°æ®åº“)

**AI é›†æˆ**:
- OpenAI API
- Model Context Protocol (MCP)
- Token è®¡æ•° (tiktoken)
- è®°å¿†ç³»ç»Ÿ (mem0ai)
- å‘é‡æ•°æ®åº“ (Qdrant)

**æ•°æ®åº“**:
- PostgreSQL (ä¸»æ•°æ®åº“)
- Qdrant (å‘é‡å­˜å‚¨)
- SQLite (å¼€å‘ç¯å¢ƒ)

**æ‰§è¡Œç¯å¢ƒ**:
- Docker (æ²™ç›’å®¹å™¨åŒ–)
- RPC é€šä¿¡ (æ²™ç›’ä¸ä¸»è¿›ç¨‹)
- å¼‚æ­¥æ‰§è¡Œ (asyncio)

---

## ğŸ“ å…³é”®æ–‡ä»¶ä½ç½®

### Clawdbot

| è·¯å¾„ | è¯´æ˜ |
|------|------|
| `/opt/homebrew/lib/node_modules/clawdbot/` | Clawdbot æ ¹ç›®å½• |
| `/opt/homebrew/lib/node_modules/clawdbot/skills/` | æŠ€èƒ½ç›®å½• (54ä¸ª) |
| `/opt/homebrew/lib/node_modules/clawdbot/docs/` | æ–‡æ¡£ç›®å½• |
| `~/.clawdbot/` | ç”¨æˆ·é…ç½®ç›®å½• |
| `~/.clawdbot/clawdbot.json` | ä¸»é…ç½® |
| `~/.clawdbot/agents/` | ä»£ç†é…ç½® |

### NekroAgent

| è·¯å¾„ | è¯´æ˜ |
|------|------|
| `nekro_agent/__init__.py` | å…¥å£æ–‡ä»¶ |
| `nekro_agent/core/config.py` | é…ç½®ç³»ç»Ÿ |
| `nekro_agent/adapters/` | é€‚é…å™¨å®ç° |
| `nekro_agent/core/` | æ ¸å¿ƒå·¥å…· |
| `nekro_agent/services/` | ä¸šåŠ¡æœåŠ¡ |
| `nekro_agent/systems/` | ç³»ç»Ÿæ¨¡å— |
| `frontend/` | React Web UI |
| `sandbox/` | æ²™ç›’ç¯å¢ƒ |
| `docker/` | Docker é…ç½® |
| `pyproject.toml` | é¡¹ç›®é…ç½® |

---

## ğŸ¯ æ ¸å¿ƒå·¥ä½œæµç¨‹

### Clawdbot æ¶ˆæ¯æµ

```
ç”¨æˆ·æ¶ˆæ¯ â†’ Channel æ¥æ”¶ â†’ Gateway è·¯ç”± â†’ Agent å¤„ç† â†’ Gateway å“åº” â†’ Channel å‘é€
```

### NekroAgent æ¶ˆæ¯æµ

```
å¹³å°æ¶ˆæ¯ â†’ é€‚é…å™¨æ¥æ”¶ â†’ æ¶ˆæ¯æ ¡éªŒ â†’ æ’ä»¶å¤„ç† â†’ Agent å†³ç­– â†’ ä»£ç ç”Ÿæˆ â†’ æ²™ç›’æ‰§è¡Œ â†’ ç»“æœè¿”å›
```

### Canvas å·¥ä½œæµ

```
HTML æ–‡ä»¶ â†’ Canvas Host (18793) â†’ Node Bridge â†’ èŠ‚ç‚¹æ¸²æŸ“
```

---

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

### Clawdbot

```bash
# æœåŠ¡ç®¡ç†
clawdbot gateway status
clawdbot gateway start
clawdbot gateway restart

# çŠ¶æ€æŸ¥è¯¢
clawdbot status
clawdbot status --all
clawdbot status --deep

# é…ç½®ç®¡ç†
clawdbot config get
clawdbot config.set models.bedrockDiscovery.enabled true

# èŠ‚ç‚¹ç®¡ç†
clawdbot nodes list
clawdbot nodes describe <node-id>

# å®‰å…¨å®¡è®¡
clawdbot security audit
clawdbot security audit --deep
```

### NekroAgent

```bash
# å¼€å‘è¿è¡Œ
poe dev          # å¸¦çƒ­é‡è½½

# ç”Ÿäº§è¿è¡Œ
poe start        # ä½¿ç”¨ .env.prod

# æµ‹è¯•
poe test         # æ’ä»¶åŠ è½½æµ‹è¯•

# ä»£ç è´¨é‡
poe lint         # ä»£ç æ£€æŸ¥
poe lint-fix     # è‡ªåŠ¨ä¿®å¤
poe format       # æ ¼å¼åŒ–

# ä¾èµ–ç®¡ç†
poe sync         # åŒæ­¥ä¾èµ–
poe lock         # æ›´æ–°é”å®šæ–‡ä»¶
poe update       # æ›´æ–°æ‰€æœ‰ä¾èµ–

# æ¸…ç†
poe clean        # æ¸…ç†ç¼“å­˜
```

---

## ğŸ”Œ ç«¯å£å’Œåœ°å€

| æœåŠ¡ | åœ°å€ | ç”¨é€” |
|------|------|------|
| Gateway WS | 127.0.0.1:18789 | å®¢æˆ·ç«¯è¿æ¥ |
| Canvas Host | 127.0.0.1:18793 | HTML å±•ç¤º |
| CDP (Chrome) | 127.0.0.1:18792 | æµè§ˆå™¨è°ƒè¯• |
| CDP (clawd) | 127.0.0.1:18800 | å¤‡ç”¨æµè§ˆå™¨ |

---

## ğŸ“ é‡è¦é…ç½®é¡¹

### Clawdbot (~/.clawdbot/clawdbot.json)

```json
{
  "gateway": {
    "port": 18789,
    "mode": "local",      // loopback | lan | tailnet | auto
    "bind": "loopback"
  },
  "models": {
    "providers": {
      "minimax": {
        "baseUrl": "https://api.minimaxi.com/anthropic",
        "models": [{"id": "MiniMax-M2.1", "contextWindow": 200000}]
      }
    }
  },
  "channels": {
    "discord": {
      "enabled": true,
      "token": "..."
    }
  },
  "canvasHost": {
    "enabled": true,
    "port": 18793,
    "root": "~/clawd/canvas",
    "liveReload": true
  }
}
```

### NekroAgent (.env.example)

```env
# æ ¸å¿ƒé…ç½®
NEKRO_LOG_LEVEL=INFO
NEKRO_DATA_PATH=./data

# æ•°æ®åº“
DATABASE_URL=postgresql://user:pass@localhost/nekro

# AI æ¨¡å‹
OPENAI_API_KEY=sk-...
OPENAI_BASE_URL=https://api.openai.com/v1
CHAT_MODEL=gpt-4o

# Docker
DOCKER_SANDBOX_IMAGE=kromiose/nekro-agent-sandbox:latest

# äº‘æœåŠ¡
NEKRO_CLOUD_API_KEY=...
WEAVE_ENABLED=false
WEAVE_PROJECT_NAME=nekro-agent
```

---

## ğŸ§© æŠ€èƒ½ç³»ç»Ÿ (54ä¸ª)

### é€šä¿¡ç±»
- **discord** - Discord æ¶ˆæ¯ç®¡ç†
- **slack** - Slack æ§åˆ¶
- **telegram** - Telegram æ“ä½œ
- **bluebubbles** - iMessage é›†æˆ
- **imsg** - Apple Messages
- **email/smtp** - é‚®ä»¶å‘é€

### å¼€å‘ç±»
- **github** - GitHub æ“ä½œ (gh CLI)
- **coding-agent** - Codex/Claude Code é›†æˆ
- **skill-creator** - æŠ€èƒ½å¼€å‘
- **session-logs** - ä¼šè¯æ—¥å¿—åˆ†æ

### æ•°æ®ç±»
- **notion** - Notion API
- **obsidian** - Obsidian ç¬”è®°
- **apple-notes** - Apple Notes
- **apple-reminders** - Apple Reminders
- **things-mac** - Things ä»»åŠ¡ç®¡ç†

### å·¥å…·ç±»
- **weather** - å¤©æ°”æŸ¥è¯¢
- **tts** - è¯­éŸ³åˆæˆ
- **canvas** - HTML å†…å®¹å±•ç¤º
- **image** - å›¾ç‰‡åˆ†æ
- **browser** - æµè§ˆå™¨æ§åˆ¶

### ç³»ç»Ÿç±»
- **tmux** - ç»ˆç«¯ç®¡ç†
- **voice-call** - è¯­éŸ³é€šè¯
- **spotify-player** - Spotify æ§åˆ¶
- **sag** - ElevenLabs TTS

---

## ğŸ’¡ å…³é”®æ¦‚å¿µ

### Clawdbot

1. **Gateway** - æ ¸å¿ƒå®ˆæŠ¤è¿›ç¨‹ï¼Œç®¡ç†æ‰€æœ‰è¿æ¥
2. **Node** - è¿æ¥çš„è®¾å¤‡ (macOS/iOS/Android)
3. **Agent** - AI ä»£ç†å®ä¾‹
4. **Session** - å¯¹è¯ä¼šè¯
5. **Channel** - æ¶ˆæ¯é€šé“ (Discord, WhatsApp ç­‰)
6. **Canvas** - HTML å†…å®¹å±•ç¤ºç³»ç»Ÿ
7. **Skill** - å¯é‡ç”¨çš„åŠŸèƒ½åŒ…
8. **Heartbeat** - å®šæœŸæ£€æŸ¥æœºåˆ¶

### NekroAgent

1. **Adapter** - å¹³å°é€‚é…å™¨
2. **Sandbox** - æ²™ç›’æ‰§è¡Œç¯å¢ƒ
3. **Plugin** - æ’ä»¶ç³»ç»Ÿ
4. **Preset** - äººè®¾é…ç½®
5. **Agent** - AI ä»£ç†
6. **System** - æ ¸å¿ƒç³»ç»Ÿæ¨¡å—
7. **Service** - ä¸šåŠ¡æœåŠ¡

---

## ğŸ¨ å·¥ä½œç¯å¢ƒ

### æˆ‘çš„é…ç½®

- **å·¥ä½œç›®å½•**: `/Users/clawd/clawd/`
- **æµè§ˆå™¨**: Chrome (profile: chrome, CDP: 18792)
- **Gateway**: 127.0.0.1:18789
- **Canvas Host**: 127.0.0.1:18793
- **æ¨¡å‹**: MiniMax-M2.1 (200k context)

### é‡è¦æ–‡ä»¶

```
/Users/clawd/clawd/
â”œâ”€â”€ SOUL.md           # æ ¸å¿ƒåŸåˆ™
â”œâ”€â”€ IDENTITY.md       # æˆ‘çš„èº«ä»½
â”œâ”€â”€ USER.md           # Miose ä¿¡æ¯
â”œâ”€â”€ TOOLS.md          # å·¥å…·é…ç½®
â”œâ”€â”€ AGENTS.md         # ä»£ç†é…ç½®
â”œâ”€â”€ HEARTBEAT.md      # å¿ƒè·³ä»»åŠ¡
â”œâ”€â”€ memory/           # è®°å¿†æ–‡ä»¶
â”‚   â”œâ”€â”€ workflow.md   # å·¥ä½œæµç¨‹
â”‚   â””â”€â”€ research_nekro_agent_2026-01-29.md  # è°ƒç ”æŠ¥å‘Š
â””â”€â”€ canvas/           # Canvas æ–‡ä»¶
```

---

## ğŸš€ å¿«é€Ÿå‚è€ƒ

### éœ€è¦å¸®åŠ©æ—¶

1. **æŸ¥çœ‹æ–‡æ¡£**: `/opt/homebrew/lib/node_modules/clawdbot/docs/`
2. **æŸ¥çœ‹æŠ€èƒ½**: `/opt/homebrew/lib/node_modules/clawdbot/skills/<skill>/SKILL.md`
3. **æŸ¥çœ‹é…ç½®**: `~/.clawdbot/clawdbot.json`
4. **æ£€æŸ¥çŠ¶æ€**: `clawdbot status`

### å¸¸è§ä»»åŠ¡

- **å‘é€æ¶ˆæ¯**: `message action=send to=channel:xxx content="..."`
- **è¿è¡Œä»£ç **: `bash pty:true command:"codex exec '...'"` (éœ€è¦ git repo)
- **æœç´¢æ–‡ä»¶**: `rg "keyword" ~/.clawdbot/agents/`
- **æŸ¥çœ‹æ—¥å¿—**: `clawdbot logs --follow`

---

*æœ€åæ›´æ–°: 2026-01-29*
*ç»´æŠ¤è€…: Yuki*
