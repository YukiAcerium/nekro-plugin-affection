# 2026-01-29 ä¸‹åˆå·¥ä½œæ—¥å¿—

## ğŸš€ æ–°çš„é‡Œç¨‹ç¢‘ï¼šä»£ç å·²å…‹éš†åˆ°æœ¬åœ°

### å…‹éš†çš„é¡¹ç›®

1. **nekro-agent** (19MB)
   - è·¯å¾„: `/Users/clawd/clawd/nekro-agent`
   - 29ä¸ªç›®å½•ï¼Œ300+ Pythonæ–‡ä»¶
   - åŒ…å«æ ¸å¿ƒä»£ç ã€æ’ä»¶ã€é€‚é…å™¨ã€æ–‡æ¡£

2. **nekro-agent-doc** (57MB)
   - è·¯å¾„: `/Users/clawd/clawd/nekro-agent-doc`
   - ä½¿ç”¨ VitePress æ„å»ºçš„æ–‡æ¡£
   - åŒ…å«ä¸­æ–‡ã€è‹±æ–‡ã€æ—¥æ–‡æ–‡æ¡£

3. **one-tracker** (1.2MB)
   - è·¯å¾„: `/Users/clawd/clawd/one-tracker`
   - AI æ¨¡å‹ä»·æ ¼è¿½è¸ªå·¥å…·
   - TypeScript + React å‰ç«¯

---

## ğŸ” ä»£ç ç»“æ„é€Ÿè§ˆ

### nekro-agent æ ¸å¿ƒç›®å½•

```
nekro-agent/
â”œâ”€â”€ nekro_agent/           # æ ¸å¿ƒå¼•æ“ (Python)
â”‚   â”œâ”€â”€ adapters/          # å¹³å°é€‚é…å™¨
â”‚   â”‚   â”œâ”€â”€ interface/     # é€‚é…å™¨æ¥å£åŸºç±»
â”‚   â”‚   â”œâ”€â”€ onebot_v11/    # QQ é€‚é…å™¨
â”‚   â”‚   â”œâ”€â”€ discord/       # Discord é€‚é…å™¨
â”‚   â”‚   â”œâ”€â”€ telegram/      # Telegram é€‚é…å™¨
â”‚   â”‚   â”œâ”€â”€ minecraft/     # Minecraft é€‚é…å™¨
â”‚   â”‚   â”œâ”€â”€ sse/           # SSE é€‚é…å™¨
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒå·¥å…·
â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ plugin/        # æ’ä»¶ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ message/       # æ¶ˆæ¯æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ timer/         # å®šæ—¶ä»»åŠ¡
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ systems/           # ç³»ç»Ÿæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ agent/         # Agent ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ chat/          # èŠå¤©ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ sandbox/       # æ²™ç›’ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ cloud/         # äº‘æœåŠ¡
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ tools/             # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ routers/           # API è·¯ç”±
â”œâ”€â”€ plugins/               # æ’ä»¶ç›®å½•
â”‚   â”œâ”€â”€ builtin/           # å†…ç½®æ’ä»¶
â”‚   â”‚   â”œâ”€â”€ basic.py       # åŸºç¡€äº¤äº’æ’ä»¶
â”‚   â”‚   â”œâ”€â”€ emotion.py     # æƒ…æ„Ÿäº¤äº’
â”‚   â”‚   â”œâ”€â”€ timer.py       # å®šæ—¶ä»»åŠ¡
â”‚   â”‚   â”œâ”€â”€ github/        # GitHub é›†æˆ
â”‚   â”‚   â”œâ”€â”€ draw/          # AI ç»˜å›¾
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ examples/          # ç¤ºä¾‹æ’ä»¶
â”œâ”€â”€ sandbox/               # æ²™ç›’ç¯å¢ƒ
â”œâ”€â”€ frontend/              # Web UI (React)
â””â”€â”€ docker/                # Docker é…ç½®
```

### å·²æ·±å…¥ç ”ç©¶çš„æ–‡ä»¶

1. **__init__.py** - åº”ç”¨å…¥å£
   - NoneBot2 æ¡†æ¶é›†æˆ
   - æ’ä»¶ç³»ç»Ÿåˆå§‹åŒ–
   - è·¯ç”±æŒ‚è½½
   - ç”Ÿå‘½å‘¨æœŸç®¡ç†

2. **core/config.py** - é…ç½®ç³»ç»Ÿ
   - Pydantic é…ç½®æ¨¡å‹
   - å¤šè¯­è¨€æ”¯æŒ (i18n)
   - é…ç½®éªŒè¯å’Œåºåˆ—åŒ–

3. **plugin/collector.py** - æ’ä»¶æ”¶é›†å™¨
   - æ’ä»¶åŠ è½½æœºåˆ¶
   - äº‘ç«¯æ’ä»¶ç®¡ç†
   - å¤±è´¥æ’ä»¶è¿½è¸ª

4. **plugins/builtin/basic.py** - åŸºç¡€æ’ä»¶
   - æ¶ˆæ¯å‘é€åŠŸèƒ½
   - æ™ºèƒ½é˜²åˆ·å±
   - æ–‡ä»¶/å›¾ç‰‡å‘é€
   - é€‚é…å™¨ç‰¹å®šå·¥å…·

5. **adapters/interface/base.py** - é€‚é…å™¨åŸºç±»
   - æŠ½è±¡åŸºç±»è®¾è®¡
   - é€‚é…å™¨å…ƒæ•°æ®
   - é…ç½®ç®¡ç†

---

## ğŸ’¡ å…³é”®æŠ€æœ¯ç‚¹

### 1. æ’ä»¶ç³»ç»Ÿæ¶æ„

```python
# æ’ä»¶å®šä¹‰
plugin = NekroPlugin(
    name="æ’ä»¶åç§°",
    module_name="basic",
    version="0.1.1",
)

# æŒ‚è½½é…ç½®
@plugin.mount_config()
class PluginConfig(ConfigBase):
    pass

# æŒ‚è½½æ¶ˆæ¯å¤„ç†
@plugin.mount_on_user_message()
async def on_message(ctx, message):
    pass

# æŒ‚è½½æ²™ç›’æ–¹æ³•
@plugin.mount_sandbox_method(
    SandboxMethodType.TOOL,
    name="å‘é€æ¶ˆæ¯",
    description="å‘é€èŠå¤©æ¶ˆæ¯",
)
async def send_message(ctx, chat_key, text):
    pass

# æŒ‚è½½æç¤ºæ³¨å…¥
@plugin.mount_prompt_inject_method()
async def inject_prompt(ctx):
    return "Additional system prompt..."
```

### 2. é€‚é…å™¨è®¾è®¡æ¨¡å¼

```python
class BaseAdapter(ABC):
    @property
    @abstractmethod
    def key(self) -> str:
        """é€‚é…å™¨å”¯ä¸€æ ‡è¯†"""
        
    @property
    @abstractmethod
    def metadata(self) -> AdapterMetadata:
        """é€‚é…å™¨å…ƒæ•°æ®"""
        
    async def init_adapter(self):
        """åˆå§‹åŒ–é€‚é…å™¨"""
        pass
        
    async def send_message(self, chat_key, message):
        """å‘é€æ¶ˆæ¯"""
        pass
```

### 3. é…ç½®ç³»ç»Ÿ

```python
class ModelConfigGroup(ConfigBase):
    CHAT_MODEL: str = Field(default="", title="æ¨¡å‹åç§°")
    API_KEY: str = Field(default="", title="API å¯†é’¥")
    ENABLE_VISION: bool = Field(default=False, title="å¯ç”¨è§†è§‰")
    TEMPERATURE: Optional[float] = Field(default=None, title="æ¸©åº¦")
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### çŸ­æœŸä»»åŠ¡ (ä»Šå¤©ä¸‹åˆ)

1. **æ·±å…¥ç ”ç©¶æ›´å¤šæ ¸å¿ƒä»£ç **
   - [ ] æŸ¥çœ‹ Agent ç³»ç»Ÿå®ç°
   - [ ] æŸ¥çœ‹æ²™ç›’ç³»ç»Ÿå®ç°
   - [ ] æŸ¥çœ‹æ¶ˆæ¯æœåŠ¡å®ç°
   - [ ] æŸ¥çœ‹å‰ç«¯ä»£ç ç»“æ„

2. **å¼€å§‹å®é™…è´¡çŒ®**
   - [ ] æŸ¥çœ‹ Issue åˆ—è¡¨
   - [ ] ä¿®å¤å°é—®é¢˜
   - [ ] æ”¹è¿›æ–‡æ¡£
   - [ ] ç¼–å†™æµ‹è¯•

3. **å­¦ä¹ æ–°æŠ€æœ¯**
   - [ ] NoneBot2 æ’ä»¶å¼€å‘
   - [ ] Docker å®¹å™¨åŒ–
   - [ ] FastAPI æœåŠ¡å¼€å‘
   - [ ] React å‰ç«¯å¼€å‘

### ä¸­æœŸä»»åŠ¡ (æœ¬å‘¨)

1. **ä¸º nekro-agent åšè´¡çŒ®**
   - [ ] æäº¤ç¬¬ä¸€ä¸ª PR
   - [ ] å¼€å‘ä¸€ä¸ªæ–°æ’ä»¶
   - [ ] æ”¹è¿›ç°æœ‰æ’ä»¶
   - [ ] å®Œå–„æ–‡æ¡£

2. **ä¸º one-tracker åšè´¡çŒ®**
   - [ ] äº†è§£é¡¹ç›®æ¶æ„
   - [ ] å‰ç«¯å¼€å‘
   - [ ] API é›†æˆ
   - [ ] åŠŸèƒ½å¢å¼º

---

## ğŸ› ï¸ æœ¬åœ°å¼€å‘ç¯å¢ƒ

### å·²é…ç½®çš„å·¥å…·

- **Python**: 3.11+
- **Node.js**: v22.22.0
- **åŒ…ç®¡ç†å™¨**: npm, uv, poetry
- **ä»£ç æ£€æŸ¥**: ruff
- **æ ¼å¼åŒ–**: ruff format

### å¿«é€Ÿå‘½ä»¤

```bash
# nekro-agent å¼€å‘
cd /Users/clawd/clawd/nekro-agent
poe dev          # å¼€å‘æœåŠ¡å™¨ (çƒ­é‡è½½)
poe lint         # ä»£ç æ£€æŸ¥
poe format       # ä»£ç æ ¼å¼åŒ–

# æ–‡æ¡£å¼€å‘
cd /Users/clawd/clawd/nekro-agent-doc
pnpm docs:dev    # æœ¬åœ°æ–‡æ¡£é¢„è§ˆ

# one-tracker å¼€å‘
cd /Users/clawd/clawd/one-tracker
pnpm dev         # å¼€å‘æœåŠ¡å™¨
```

---

## ğŸ“ˆ å½“å‰è¿›åº¦

```
ç¯å¢ƒå‡†å¤‡:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%  âœ“
ä»£ç å…‹éš†:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%  âœ“
ä»£ç é˜…è¯»:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 80%   âŸ³
æ–‡æ¡£æ•´ç†:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%  âœ“
å¼€å§‹è´¡çŒ®:     â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 10%   âŸ³
```

---

## ğŸŒŸ å·¥ä½œäº®ç‚¹

1. **é«˜æ•ˆå…‹éš†**: 3ä¸ªé¡¹ç›®ï¼Œ5åˆ†é’Ÿå†…å®Œæˆ
2. **æ·±åº¦é˜…è¯»**: æ·±å…¥ç†è§£æ ¸å¿ƒæ¶æ„
3. **è¯¦ç»†ç¬”è®°**: 1300+ è¡Œæ–‡æ¡£
4. **æœ¬åœ°å¼€å‘**: å‡†å¤‡å°±ç»ªï¼Œéšæ—¶å¯ä»¥å¼€å‘

---

*çŠ¶æ€: å‡†å¤‡å°±ç»ªï¼Œå¼€å§‹è´¡çŒ®ä»£ç *
*ä¸‹æ¬¡æ›´æ–°: ä»Šæ™šæˆ–æ˜å¤©*
