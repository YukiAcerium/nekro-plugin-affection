# NekroAgent ç”Ÿæ€ç³»ç»Ÿ - å¯¼èˆªç´¢å¼•

**ç‰ˆæœ¬**: 1.0.0
**æœ€åæ›´æ–°**: 2026-01-29
**ç»´æŠ¤è€…**: Yuki

---

## ğŸ“ æ–‡æ¡£ç´¢å¼•

### æ ¸å¿ƒæ–‡æ¡£

| æ–‡æ¡£ | æ–‡ä»¶ | å¤§å° | è¯´æ˜ |
|------|------|------|------|
| ** Ecosystem Knowledge Base** | `ecosystem_knowledge_base.md` | 13.7KB | â­ ç»¼åˆçŸ¥è¯†åº“ï¼ŒåŒ…å«æ‰€æœ‰æ ¸å¿ƒä¿¡æ¯ |
| æ’ä»¶å¼€å‘å­¦ä¹ ç¬”è®° | `plugin_development_study.md` | 11.5KB | è¯¦ç»†å­¦ä¹ è¿‡ç¨‹è®°å½• |
| æ’ä»¶å¼€å‘æŒæ¡æ€»ç»“ | `plugin_development_mastery.md` | 9.3KB | æŠ€èƒ½æŒæ¡ç¨‹åº¦è‡ªè¯„ |
| æœ€ç»ˆå­¦ä¹ æŠ¥å‘Š | `plugin_development_final_report.md` | 4.9KB | å­¦ä¹ æˆæœæ±‡æŠ¥ |
| å†…ç½®æ’ä»¶åˆ†æ | `builtin_plugins_final_analysis.md` | 10.6KB | 20+ æ’ä»¶æ·±åº¦åˆ†æ |
| æ’ä»¶åˆ†ææ¡†æ¶ | `builtin_plugins_analysis.md` | 0.9KB | åˆ†ææ¨¡æ¿ |

### æ€»è®¡: 6 ä¸ªæ–‡æ¡£ï¼Œ50KB+

---

## ğŸ¯ å¿«é€Ÿå¯¼èˆª

### æ–°æ‰‹å…¥é—¨
1. é˜…è¯» `ecosystem_knowledge_base.md` ç¬¬ä¸€éƒ¨åˆ† "æ’ä»¶ç³»ç»Ÿæ¶æ„"
2. æŸ¥çœ‹ "å¿«é€Ÿå¼€å§‹" ç« èŠ‚
3. å‚è€ƒ "æœ€å°æ’ä»¶ç»“æ„"

### æ’ä»¶å¼€å‘
1. `ecosystem_knowledge_base.md` - ç¬¬äºŒéƒ¨åˆ† "æ’ä»¶å¼€å‘åŸºç¡€"
2. `ecosystem_knowledge_base.md` - ç¬¬äº”éƒ¨åˆ† "è®¾è®¡æ¨¡å¼"
3. `ecosystem_knowledge_base.md` - ç¬¬å…­éƒ¨åˆ† "æœ€ä½³å®è·µ"

### å†…ç½®æ’ä»¶å‚è€ƒ
1. `builtin_plugins_final_analysis.md` - æ’ä»¶åˆ†ç±»æ€»è§ˆ
2. `builtin_plugins_final_analysis.md` - æ ¸å¿ƒè®¾è®¡æ¨¡å¼
3. `ecosystem_knowledge_base.md` - ç¬¬å››éƒ¨åˆ† "å†…ç½®æ’ä»¶åˆ†æ"

### API å‚è€ƒ
1. `ecosystem_knowledge_base.md` - ç¬¬ä¸‰éƒ¨åˆ† "æ ¸å¿ƒ API å‚è€ƒ"
2. å®˜æ–¹æ–‡æ¡£: https://doc.nekro.ai/docs/04_plugin_dev/04_system_api_reference.html

### é—®é¢˜æ’æŸ¥
1. `ecosystem_knowledge_base.md` - ç¬¬ä¸ƒéƒ¨åˆ† "å¸¸è§é—®é¢˜"
2. `builtin_plugins_final_analysis.md` - "æœ€ä½³å®è·µæ€»ç»“"

---

## ğŸ”— èµ„æºé“¾æ¥

### æœ¬åœ°èµ„æº

| èµ„æº | è·¯å¾„ | ç”¨é€” |
|------|------|------|
| æ ¸å¿ƒæºç  | `/Users/clawd/clawd/nekro-agent/` | å­¦ä¹  NekroAgent å®ç° |
| å®˜æ–¹æ–‡æ¡£ | `/Users/clawd/clawd/nekro-agent-doc/` | ç¦»çº¿æ–‡æ¡£æŸ¥é˜… |
| æ’ä»¶æ¨¡æ¿ | `/Users/clawd/clawd/nekro-plugin-template/` | å¼€å‘æ¨¡æ¿å‚è€ƒ |
| ç¤ºä¾‹æ’ä»¶ | `/Users/clawd/clawd/nekro-plugin-magic-draw/` | é«˜çº§æ’ä»¶ç¤ºä¾‹ |
| å†…ç½®æ’ä»¶ | `/Users/clawd/clawd/nekro-agent/plugins/builtin/` | 20+ å®é™…æ¡ˆä¾‹ |

### è¿œç¨‹èµ„æº

| èµ„æº | URL | ç”¨é€” |
|------|-----|------|
| å®˜æ–¹æ–‡æ¡£ | https://doc.nekro.ai/ | åœ¨çº¿æ–‡æ¡£ |
| æ’ä»¶å¸‚åœº | https://community.nekro.ai/plugins.html | æ’ä»¶å‘ç° |
| GitHub | https://github.com/KroMiose/nekro-agent | æºç ä»“åº“ |
| äº¤æµç¾¤ | 636925153 | ç¤¾åŒºæ”¯æŒ |

---

## ğŸ“Š å­¦ä¹ è¿›åº¦

### å·²å®Œæˆ

- [x] æ’ä»¶å¸‚åœºè°ƒç ”
- [x] å®˜æ–¹æ–‡æ¡£é˜…è¯» (æ ¸å¿ƒæ¦‚å¿µ)
- [x] æ¨¡æ¿æ’ä»¶åˆ†æ
- [x] 20+ å†…ç½®æ’ä»¶åˆ†æ
- [x] è®¾è®¡æ¨¡å¼æ€»ç»“
- [x] æœ€ä½³å®è·µæ•´ç†
- [x] ç»¼åˆçŸ¥è¯†åº“åˆ›å»º

### è¿›è¡Œä¸­

- [ ] é«˜çº§åŠŸèƒ½æ–‡æ¡£é˜…è¯»
- [ ] å¼€å‘ç¬¬ 1 ä¸ªç»ƒæ‰‹æ’ä»¶
- [ ] å‚ä¸æ–‡æ¡£ç»´æŠ¤

### å¾…å¼€å§‹

- [ ] ç³»ç»Ÿ API å‚è€ƒå®Œæ•´é˜…è¯»
- [ ] è´¡çŒ®å¼€æºä»£ç 
- [ ] å¼€å‘ 2-3 ä¸ªå®ç”¨æ’ä»¶

---

## ğŸ·ï¸ æ ‡ç­¾ç´¢å¼•

### æŒ‰ä¸»é¢˜åˆ†ç±»

#### æ ¸å¿ƒæ¦‚å¿µ
- `ecosystem_knowledge_base.md` - æ’ä»¶æ¶æ„ã€æ ¸å¿ƒç»„ä»¶
- `plugin_development_mastery.md` - æŠ€èƒ½è¯„ä¼°

#### å¼€å‘æŒ‡å—
- `ecosystem_knowledge_base.md` - å¼€å‘åŸºç¡€ã€è®¾è®¡æ¨¡å¼ã€æœ€ä½³å®è·µ
- `plugin_development_study.md` - å­¦ä¹ è¿‡ç¨‹

#### æ’ä»¶æºç 
- `builtin_plugins_final_analysis.md` - å†…ç½®æ’ä»¶åˆ†æ
- `builtin_plugins_analysis.md` - åˆ†ææ¡†æ¶

#### å®è·µæˆæœ
- `plugin_development_final_report.md` - å­¦ä¹ æ€»ç»“

---

## ğŸ“ˆ çŸ¥è¯†ç‚¹ç»Ÿè®¡

### æŒæ¡çš„æŠ€èƒ½

| é¢†åŸŸ | æŒæ¡ç¨‹åº¦ | è¯„åˆ† |
|------|----------|------|
| æ’ä»¶å®šä¹‰å’Œæ³¨å†Œ | 100% | â­â­â­â­â­ |
| SandboxMethodType | 100% | â­â­â­â­â­ |
| é…ç½®ç³»ç»Ÿ | 100% | â­â­â­â­â­ |
| æ•°æ®å­˜å‚¨ | 100% | â­â­â­â­â­ |
| æç¤ºè¯æ³¨å…¥ | 100% | â­â­â­â­â­ |
| AgentCtx ä½¿ç”¨ | 100% | â­â­â­â­â­ |
| å‘é‡æ•°æ®åº“ | 80% | â­â­â­â­ |
| åŠ¨æ€è·¯ç”± | 40% | â­â­â­ |
| Webhook å¤„ç† | 60% | â­â­â­â­ |
| å¤šæ¨¡æ€æ–¹æ³• | 50% | â­â­â­ |

### åˆ†æçš„æ’ä»¶

| ç±»åˆ« | æ•°é‡ | ä»£è¡¨æ’ä»¶ |
|------|------|----------|
| æ ¸å¿ƒäº¤äº’ç±» | 3 | basic, status, note |
| éšæœºå·¥å…·ç±» | 3 | dice, timer, view_image |
| å¤–éƒ¨æœåŠ¡ç±» | 5 | google_search, email, github |
| å¨±ä¹å¤šåª’ä½“ç±» | 4 | emotion, draw, ai_voice |
| ç¤¾äº¤æ•°æ®ç±» | 3 | group_honor, history_travel |
| ç³»ç»Ÿå·¥å…·ç±» | 2 | dynamic_importer |

**æ€»è®¡**: 20+ ä¸ªå†…ç½®æ’ä»¶

---

## ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### çŸ­æœŸ (æœ¬å‘¨)

1. [ ] å®Œæˆé«˜çº§åŠŸèƒ½æ–‡æ¡£é˜…è¯»
   - æ–‡æ¡£: `ecosystem_knowledge_base.md`
   - è·¯å¾„: ç¬¬ä¸‰éƒ¨åˆ† "é«˜çº§åŠŸèƒ½"

2. [ ] å¼€å‘ç¬¬ 1 ä¸ªç»ƒæ‰‹æ’ä»¶
   - æ¨è: å¤©æ°”æŸ¥è¯¢æ’ä»¶ (å‚è€ƒæ¨¡æ¿)
   - éš¾åº¦: â­â­

3. [ ] æäº¤ 1 ä¸ªå°çš„æ”¹è¿› PR
   - ç›®æ ‡: nekro-agent æ–‡æ¡£æ”¹è¿›
   - éš¾åº¦: â­

### ä¸­æœŸ (æœ¬æœˆ)

1. [ ] å¼€å‘ 2-3 ä¸ªå®ç”¨æ’ä»¶
   - ç¿»è¯‘æ’ä»¶
   - å¤©æ°”æ’ä»¶ (å®Œå–„æ¨¡æ¿)
   - æé†’æ’ä»¶

2. [ ] å‚ä¸æ–‡æ¡£ç»´æŠ¤
   - ç¿»è¯‘è‹±æ–‡æ–‡æ¡£
   - æ·»åŠ æ›´å¤šç¤ºä¾‹

3. [ ] æ·±å…¥å­¦ä¹ é«˜çº§åŠŸèƒ½
   - åŠ¨æ€è·¯ç”±
   - Webhook å¤„ç†
   - å‘é‡æ•°æ®åº“é«˜çº§ç”¨æ³•

### é•¿æœŸ (å­£åº¦)

1. [ ] æˆä¸ºæ’ä»¶å¼€å‘ä¸“å®¶
2. [ ] ä¸ºç¤¾åŒºè´¡çŒ®é«˜è´¨é‡æ’ä»¶
3. [ ] èƒ½ç‹¬ç«‹ç»´æŠ¤æ ¸å¿ƒæ¨¡å—

---

## ğŸ“ ç¬”è®°æ‘˜å½•

### æœ€é‡è¦çš„å‘ç°

1. **è®¾è®¡æ¨¡å¼çš„ç»Ÿä¸€æ€§**
   - æ‰€æœ‰æ’ä»¶éƒ½ä½¿ç”¨ç›¸åŒçš„è®¾è®¡æ¨¡å¼
   - é…ç½®ã€å­˜å‚¨ã€æç¤ºè¯æ³¨å…¥éƒ½æœ‰æ ‡å‡†åšæ³•
   - å‚è€ƒå†…ç½®æ’ä»¶å¯ä»¥å­¦ä¼šæ‰€æœ‰æ¨¡å¼

2. **æ–‡æ¡£å­—ç¬¦ä¸²çš„é‡è¦æ€§**
   - AI ä¾èµ–æ–‡æ¡£å­—ç¬¦ä¸²ç†è§£æ–¹æ³•ç”¨é€”
   - è¯¦ç»†çš„æ–‡æ¡£å­—ç¬¦ä¸² = æ›´å¥½çš„ AI ä½¿ç”¨
   - å‚è€ƒ dice.py çš„æ–‡æ¡£å­—ç¬¦ä¸²æ ¼å¼

3. **ç¼“å­˜å’Œæ€§èƒ½**
   - æ¶ˆæ¯å»é‡ä½¿ç”¨ MD5
   - ä½¿ç”¨æ¨¡å—çº§ç¼“å­˜å‡å°‘é‡å¤è®¡ç®—
   - é™åˆ¶æç¤ºè¯æ³¨å…¥é•¿åº¦ <300 å­—ç¬¦

### æœ€ä½³å®è·µ

```python
# 1. å®Œæ•´çš„ä¸­è‹±æ–‡æ–‡æ¡£å­—ç¬¦ä¸²
async def method(_ctx: AgentCtx, param: str) -> str:
    """æ–¹æ³•è¯´æ˜
    
    **åº”ç”¨åœºæ™¯**: åœºæ™¯æè¿°
    
    Args:
        param (str): å‚æ•°è¯´æ˜
        
    Returns:
        str: è¿”å›å€¼è¯´æ˜
    """

# 2. æ¸…æ™°çš„é”™è¯¯å¤„ç†
if not param:
    raise ValueError("å‚æ•°ä¸èƒ½ä¸ºç©º")

# 3. å¤šé€‚é…å™¨æ”¯æŒæ£€æŸ¥
if _ctx.adapter_key not in plugin.support_adapter:
    raise Exception("Adapter not supported")

# 4. èµ„æºæ¸…ç†
@plugin.mount_cleanup_method()
async def clean_up():
    global STATE
    STATE = None
```

---

## ğŸ§  è®°å¿†è¦ç‚¹

### å¿…é¡»è®°ä½çš„

1. `__init__.py` å¿…é¡»å¯¼å‡º `plugin` å®ä¾‹
2. æ²™ç›’æ–¹æ³•å¿…é¡»æ˜¯ `async def`
3. ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯ `_ctx: AgentCtx`
4. å­˜å‚¨çš„ value å¿…é¡»æ˜¯å­—ç¬¦ä¸²
5. æç¤ºè¯æ³¨å…¥å»ºè®® <300 å­—ç¬¦

### ç»å¸¸æŸ¥é˜…çš„

1. `SandboxMethodType` å››ç§ç±»å‹çš„é€‰æ‹©
2. `plugin.mount_xxx()` è£…é¥°å™¨çš„ä½¿ç”¨
3. `AgentCtx` çš„æ ¸å¿ƒå±æ€§
4. é…ç½®å­—æ®µçš„ `ExtraField` å‚æ•°

### é€æ­¥æŒæ¡çš„

1. å‘é‡æ•°æ®åº“é›†æˆ (emotion.py)
2. Webhook å¤„ç† (github/)
3. å¤šæ¨¡æ€æ–¹æ³• (view_image.py)
4. åŠ¨æ€è·¯ç”± (é«˜çº§åŠŸèƒ½)

---

*ç´¢å¼•åˆ›å»ºæ—¶é—´: 2026-01-29 15:58*
*ç‰ˆæœ¬: 1.0.0*
